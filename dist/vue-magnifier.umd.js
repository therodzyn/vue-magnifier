var we=Object.defineProperty,ke=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var P=(t,u,y)=>u in t?we(t,u,{enumerable:!0,configurable:!0,writable:!0,value:y}):t[u]=y,V=(t,u)=>{for(var y in u||(u={}))Be.call(u,y)&&P(t,y,u[y]);if(A)for(var y of A(u))Le.call(u,y)&&P(t,y,u[y]);return t},D=(t,u)=>ke(t,We(u));(function(t,u){typeof exports=="object"&&typeof module!="undefined"?module.exports=u(require("vue")):typeof define=="function"&&define.amd?define(["vue"],u):(t=typeof globalThis!="undefined"?globalThis:t||self,t.VueMagnifier=u(t.Vue))})(this,function(t){"use strict";var u=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},y="Expected a function",N=0/0,G="[object Symbol]",U=/^\s+|\s+$/g,q=/^[-+]0x[0-9a-f]+$/i,Z=/^0b[01]+$/i,J=/^0o[0-7]+$/i,K=parseInt,Q=typeof u=="object"&&u&&u.Object===Object&&u,_=typeof self=="object"&&self&&self.Object===Object&&self,ee=Q||_||Function("return this")(),te=Object.prototype,ne=te.toString,ie=Math.max,re=Math.min,B=function(){return ee.Date.now()};function oe(e,i,r){var a,s,g,m,o,c,h=0,j=!1,v=!1,O=!0;if(typeof e!="function")throw new TypeError(y);i=X(i)||0,L(r)&&(j=!!r.leading,v="maxWait"in r,g=v?ie(X(r.maxWait)||0,i):g,O="trailing"in r?!!r.trailing:O);function $(n){var d=a,f=s;return a=s=void 0,h=n,m=e.apply(f,d),m}function M(n){return h=n,o=setTimeout(x,i),j?$(n):m}function w(n){var d=n-c,f=n-h,l=i-d;return v?re(l,g-f):l}function S(n){var d=n-c,f=n-h;return c===void 0||d>=i||d<0||v&&f>=g}function x(){var n=B();if(S(n))return I(n);o=setTimeout(x,w(n))}function I(n){return o=void 0,O&&a?$(n):(a=s=void 0,m)}function E(){o!==void 0&&clearTimeout(o),h=0,a=c=s=o=void 0}function k(){return o===void 0?m:I(B())}function T(){var n=B(),d=S(n);if(a=arguments,s=this,c=n,d){if(o===void 0)return M(c);if(v)return o=setTimeout(x,i),$(c)}return o===void 0&&(o=setTimeout(x,i)),m}return T.cancel=E,T.flush=k,T}function L(e){var i=typeof e;return!!e&&(i=="object"||i=="function")}function ae(e){return!!e&&typeof e=="object"}function fe(e){return typeof e=="symbol"||ae(e)&&ne.call(e)==G}function X(e){if(typeof e=="number")return e;if(fe(e))return N;if(L(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=L(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=e.replace(U,"");var r=Z.test(e);return r||J.test(e)?K(e.slice(2),r?2:8):q.test(e)?N:+e}var le=oe,F="Expected a function",R=0/0,ue="[object Symbol]",se=/^\s+|\s+$/g,ce=/^[-+]0x[0-9a-f]+$/i,de=/^0b[01]+$/i,me=/^0o[0-7]+$/i,ge=parseInt,he=typeof u=="object"&&u&&u.Object===Object&&u,ve=typeof self=="object"&&self&&self.Object===Object&&self,be=he||ve||Function("return this")(),ye=Object.prototype,$e=ye.toString,Te=Math.max,xe=Math.min,C=function(){return be.Date.now()};function Oe(e,i,r){var a,s,g,m,o,c,h=0,j=!1,v=!1,O=!0;if(typeof e!="function")throw new TypeError(F);i=Y(i)||0,W(r)&&(j=!!r.leading,v="maxWait"in r,g=v?Te(Y(r.maxWait)||0,i):g,O="trailing"in r?!!r.trailing:O);function $(n){var d=a,f=s;return a=s=void 0,h=n,m=e.apply(f,d),m}function M(n){return h=n,o=setTimeout(x,i),j?$(n):m}function w(n){var d=n-c,f=n-h,l=i-d;return v?xe(l,g-f):l}function S(n){var d=n-c,f=n-h;return c===void 0||d>=i||d<0||v&&f>=g}function x(){var n=C();if(S(n))return I(n);o=setTimeout(x,w(n))}function I(n){return o=void 0,O&&a?$(n):(a=s=void 0,m)}function E(){o!==void 0&&clearTimeout(o),h=0,a=c=s=o=void 0}function k(){return o===void 0?m:I(C())}function T(){var n=C(),d=S(n);if(a=arguments,s=this,c=n,d){if(o===void 0)return M(c);if(v)return o=setTimeout(x,i),$(c)}return o===void 0&&(o=setTimeout(x,i)),m}return T.cancel=E,T.flush=k,T}function Se(e,i,r){var a=!0,s=!0;if(typeof e!="function")throw new TypeError(F);return W(r)&&(a="leading"in r?!!r.leading:a,s="trailing"in r?!!r.trailing:s),Oe(e,i,{leading:a,maxWait:i,trailing:s})}function W(e){var i=typeof e;return!!e&&(i=="object"||i=="function")}function je(e){return!!e&&typeof e=="object"}function Ie(e){return typeof e=="symbol"||je(e)&&$e.call(e)==ue}function Y(e){if(typeof e=="number")return e;if(Ie(e))return R;if(W(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=W(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=e.replace(se,"");var r=de.test(e);return r||me.test(e)?ge(e.slice(2),r?2:8):ce.test(e)?R:+e}var H=Se;const Ee=["src"],Me={inheritAttrs:!1},p=t.defineComponent(D(V({},Me),{props:{src:{default:""},width:{default:"100%"},height:{default:"auto"},className:{default:""},zoomImgSrc:{default:""},zoomFactor:{default:1.5},mgWidth:{default:150},mgHeight:{default:150},mgBorderWidth:{default:2},mgShape:{default:"circle"},mgShowOverflow:{type:Boolean,default:!0},mgMouseOffsetX:{default:0},mgMouseOffsetY:{default:0},mgTouchOffsetX:{default:()=>-50},mgTouchOffsetY:{default:()=>-50},mgShow:{type:Boolean,default:!0},mgCornerBgColor:{default:"#fff"}},emits:["image:load"],setup(e,{emit:i}){const r=t.ref();let a=t.ref(new DOMRect),s=t.ref(!1),g=t.ref(0),m=t.ref(0),o=t.ref(0),c=t.ref(0);const h=t.computed(()=>{let f="vue-magnifier__magnifying-glass";return s.value&&(f+=" vue-magnifier__visible"),e.mgShape==="circle"&&(f+=" vue-magnifier__circle"),f}),j=t.computed(()=>({width:e.width,height:e.height,overflow:e.mgShowOverflow?"visible":"hidden"})),v=t.computed(()=>({cursor:e.mgShow?"none":"",width:"100%",height:"100%"})),O=t.computed(()=>({width:`${e.mgWidth}px`,height:`${e.mgHeight}px`,left:`calc(${o.value*100}% - ${e.mgWidth/2}px + ${g.value}px - ${e.mgBorderWidth}px)`,top:`calc(${c.value*100}% - ${e.mgHeight/2}px + ${m.value}px - ${e.mgBorderWidth}px)`,backgroundImage:`url('${e.zoomImgSrc||e.src}')`,backgroundPosition:`calc(${o.value*100}% + ${e.mgWidth/2}px - ${o.value*e.mgWidth}px) calc(${c.value*100}% + ${e.mgHeight/2}px - ${c.value*e.mgWidth}px)`,backgroundSize:`${e.zoomFactor*a.value.width}% ${e.zoomFactor*a.value.height}%`,borderWidth:`${e.mgBorderWidth}px`,backgroundColor:e.mgCornerBgColor})),$=()=>{r.value&&(a.value=r.value.getBoundingClientRect())},M=f=>{i("image:load",f),$()},w=()=>{$()};let S=f=>{if(a.value){const l=f.target;g.value=e.mgMouseOffsetX,m.value=e.mgMouseOffsetY,o.value=(f.clientX-a.value.left)/l.clientWidth,c.value=(f.clientY-a.value.top)/l.clientHeight,s.value=!0}};const x=()=>{s.value=!1},I=()=>{$()};let E=f=>{if(a.value){const l=f.target,b=(f.targetTouches[0].clientX-a.value.left)/l.clientWidth,z=(f.targetTouches[0].clientY-a.value.top)/l.clientHeight;b>=0&&z>=0&&b<=1&&z<=1?(g.value=e.mgTouchOffsetX,m.value=e.mgTouchOffsetY,o.value=b,c.value=z,s.value=!0):s.value=!1}};const k=()=>{s.value=!1},T=le($,200);S=H(S,20,{trailing:!1}),E=H(E,20,{trailing:!1});const n=()=>{window.addEventListener("resize",T),window.addEventListener("scroll",T,!0)},d=()=>{window.removeEventListener("resize",T),window.removeEventListener("scroll",T,!0)};return t.onMounted(()=>{n()}),t.onUnmounted(()=>{d()}),(f,l)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(`vue-magnifier__magnifier ${e.className}`),style:t.normalizeStyle(t.unref(j))},[t.createElementVNode("img",t.mergeProps({ref_key:"img",ref:r,src:e.src},f.$attrs,{class:"vue-magnifier__magnifier-image",style:t.unref(v),onLoad:l[0]||(l[0]=b=>M(b)),onMouseenter:l[1]||(l[1]=b=>w()),onMousemove:l[2]||(l[2]=b=>t.unref(S)(b)),onMouseout:l[3]||(l[3]=b=>x()),onTouchstart:l[4]||(l[4]=t.withModifiers(b=>I(),["prevent"])),onTouchmove:l[5]||(l[5]=t.withModifiers(b=>t.unref(E)(b),["prevent"])),onTouchend:l[6]||(l[6]=b=>k())}),null,16,Ee),a.value&&e.mgShow?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(t.unref(h)),style:t.normalizeStyle(t.unref(O))},null,6)):t.createCommentVNode("",!0)],6))}}));var Ce="";return p.install=e=>{e.component("VueMagnifier",p)},p});
